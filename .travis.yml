sudo: required
services:
  - docker

before_install:
  - docker build -t parthgupta13/student-frontend-test -f ./student-frontend/Dockerfile.dev ./student-frontend
  
script:
  - docker run parthgupta13/student-frontend-test npm run test

after_success:
  - docker build -t parthgupta13/student-frontend ./student-frontend
  - docker build -t parthgupta13/student-backend ./student-backend
  - docker build -t parthgupta13/student-nginx ./nginx
  # Login in to docker 
  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_ID" --password-stdin
  # Pushing images to dockerhub
  - docker push parthgupta13/student-frontend
  - docker push parthgupta13/student-backend
  - docker push parthgupta13/student-nginx
  